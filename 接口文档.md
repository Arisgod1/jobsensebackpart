# JobSense 灵录师接口文档

## 1 面试/工作咨询接口

### 1.1 基本信息

- **请求路径**: `/ai/chat`
- **请求方式**: `GET`
- **接口描述**:  
  用于对用户的就职、面试、工作等相关问题进行智能回复。

### 1.2 请求参数

| 参数名 | 类型   | 是否必须 | 备注                   |
| ------ | ------ | -------- | ---------------------- |
| prompt | string | 必须     | 用户询问的问题         |
| chatId | number | 必须     | 用于标记是否是同一会话 |

### 1.3 响应数据

- **响应格式**: 流式字符串（`Flux<String>`）

| 参数名 | 类型   | 是否必须 | 备注           |
| ------ | ------ | -------- | -------------- |
| 无名   | string | 必须     | 流式字符串形式的回复文本 |

### 1.4 响应示例

```text
你好！很高兴见到你。作为一名职业规划与求职指导专家，我非常乐意为你提供帮助。如果你正在为求职感到困惑或不确定，可以告诉我你的具体情况，包括你的教育背景、工作经验、求职目标以及目前遇到的问题。我会根据你的实际情况，结合行业动态和职场趋势，为你提供针对性的分析和实用的建议。

无论你是刚刚开始规划职业方向，还是已经在求职过程中遇到了具体的难题，都可以随时告诉我。我们一起探讨，找到适合你的解决方案！ 😊

你可以从以下几个方面分享你的信息：
1. 教育背景（专业、学历、毕业院校等）。
2. 工作经验（实习、兼职、全职或项目经验）。
3. 求职目标岗位及行业（方向、职位类型、目标企业性质）。
4. 当前遇到的具体困惑或问题描述。

期待听到你的故事！
```

---

## 2 上传 PDF 文件接口

### 2.1 基本信息

- **请求路径**: `/ai/pdf/upload/{chatId}`
- **请求方式**: `POST`
- **接口描述**:  
  供用户上传 PDF 文件，上传后文件会被保存并写入向量数据库，供后续基于该文件内容的智能问答使用。

### 2.2 请求参数

| 参数名 | 类型       | 是否必须 | 备注                     |
| ------ | ---------- | -------- | ------------------------ |
| chatId | path参数   | 必须     | 会话ID，用于标记文件归属 |
| file   | form-data  | 必须     | 上传的 PDF 文件           |

### 2.3 请求示例 (curl)

```bash
curl -X POST "http://your-domain/ai/pdf1/upload/12345" \
  -F "file=@yourfile.pdf" \
  -H "Content-Type: multipart/form-data"
```

### 2.4 响应数据

| 字段    | 类型   | 说明           |
| ------- | ------ | -------------- |
| code | number | 编码：1成功，0为失败 |
| msg | string | 错误信息或成功信息 |

### 2.5 响应示例

成功：

```json
{
  "code": 1,
  "msg": "success"
}
```

失败：

```json
{
  "code": "0",
  "msg": "只能上传PDF文件！"
}
```

### 2.6 注意事项

- 仅支持上传 `application/pdf` 类型的文件。
- 上传后文件会被保存至服务器，同时会将 PDF 内容读取并拆分为多个文档页，再写入向量数据库。
- 向量库用于后续基于 PDF 文档内容的问答检索。

---

## 3 PDF 聊天问答接口

### 3.1 基本信息

- **请求路径**: `/ai/pdf/chat`
- **请求方式**: `GET`
- **接口描述**:  
  基于上传的 PDF 文件内容，针对用户的提问进行智能问答。

### 3.2 请求参数

| 参数名 | 类型   | 是否必须 | 备注                      |
| ------ | ------ | -------- | ------------------------- |
| prompt | string | 必须     | 用户提问文本              |
| chatId | string | 必须     | 会话ID，标记对应的 PDF 文件 |

### 3.3 响应数据

- **响应格式**: 流式字符串（`Flux<String>`）

| 参数名 | 类型   | 说明                     |
| ------ | ------ | ------------------------ |
| 无名   | string | 根据 PDF 内容生成的回答文本 |

### 3.4 功能说明

- 该接口会根据 `chatId` 查找对应的 PDF 文件。
- 结合向量数据库中该 PDF 文档的向量数据，利用自然语言处理模型生成针对用户问题的回答。
- 支持多轮会话，保证上下文连续性。

---

## 4 PDF 文件下载接口

### 4.1 基本信息

- **请求路径**: `/ai/pdf/file/{chatId}`
- **请求方式**: `GET`
- **接口描述**:  
  根据会话 ID 下载对应的 PDF 文件。

### 4.2 请求参数

| 参数名 | 类型     | 是否必须 | 备注           |
| ------ | -------- | -------- | -------------- |
| chatId | path参数 | 必须     | 会话ID，文件标识 |

### 4.3 响应数据

- 返回对应的 PDF 文件，响应头包含文件名，方便浏览器下载。

---

# 说明

- `chatId` 是核心参数，用于标识用户会话及其对应的上传文件。
- 文件上传成功后，PDF 会被拆分并写入向量库，供聊天时调用。
- 该系统集成了文件存储、向量检索和智能问答能力，支持基于 PDF 内容的智能对话。
